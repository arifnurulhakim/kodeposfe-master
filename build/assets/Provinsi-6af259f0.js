import{_ as H,s as J,r as d,k as Q,o as W,E as y,l as X,b as c,c as k,d as g,e as t,f as s,g as i,q as C,t as N,n as I,i as S,p as Z,j as ee}from"./index-3318d3fe.js";const v=P=>(Z("data-v-91e96428"),P=P(),ee(),P),oe={class:"grid"},se={class:"col-12"},le={class:"card"},ae={class:"my-2"},te={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ie=v(()=>t("h5",{class:"m-0"},"Provinsi",-1)),ne={class:"block mt-2 md:mt-0 p-input-icon-left"},re=v(()=>t("i",{class:"pi pi-search"},null,-1)),de=v(()=>t("span",{class:"p-column-title"},"Kode Provinsi",-1)),ue=v(()=>t("span",{class:"p-column-title"},"Nama Provinsi",-1)),ce={class:"field"},ve=v(()=>t("label",{for:"kode_prov"},"Kode Provinsi",-1)),pe={key:0,class:"p-invalid"},me={class:"field"},_e=v(()=>t("label",{for:"nama_provinsi"},"Nama Provinsi",-1)),fe={key:0,class:"p-invalid"},be={class:"flex align-items-center justify-content-center"},he=v(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ye={key:0},ke={class:"flex align-items-center justify-content-center"},ge=v(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Pe={key:0},xe={__name:"Provinsi",setup(P){const _=J(),r=d(null),u=d(!1),b=d(!1),h=d(!1),e=d({}),p=d(null),T=d(null),x=d({}),m=d(!1);Q(()=>{K()}),W(()=>{U()});const U=()=>{y.get("api/provinsi").then(a=>{a.data.status==="success"&&(r.value=a.data.data)}).catch(a=>{console.error(a)})},L=()=>{e.value={},m.value=!1,u.value=!0},M=()=>{u.value=!1,m.value=!1},B=async()=>{if(m.value=!0,e.value.kode_prov&&e.value.nama_provinsi){if(console.log(e.value.id),e.value.id){const a=A(e.value.id);r.value[a]=e.value,await y.put(`/api/provinsi/${e.value.id}`,{kode_prov:e.value.kode_prov,nama_provinsi:e.value.nama_provinsi}),_.add({severity:"success",summary:"Successful",detail:"Provinsi Updated",life:3e3}),u.value=!1,e.value={}}else r.value.push(e.value),await y.post("/api/provinsi",{kode_prov:e.value.kode_prov,nama_provinsi:e.value.nama_provinsi}),_.add({severity:"success",summary:"Successful",detail:"Provinsi Created",life:3e3}),u.value=!1,e.value={};u.value=!1,e.value={}}},F=a=>{e.value={...a},console.log(e),u.value=!0},$=a=>{e.value=a,b.value=!0},q=async()=>{try{await y.delete(`/api/provinsi/${e.value.id}`),r.value=r.value.filter(a=>a.id!==e.value.id),b.value=!1,e.value={},_.add({severity:"success",summary:"Successful",detail:"Provinsi Deleted",life:3e3})}catch(a){console.error(a),_.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},A=a=>{let o=-1;for(let f=0;f<r.value.length;f++)if(r.value[f].id===a){o=f;break}return o},E=()=>{T.value.exportCSV()},j=()=>{h.value=!0},z=async()=>{try{const a=p.value.map(o=>o.id);await y.delete("/api/provinsi",{data:{ids:a}}),r.value=r.value.filter(o=>!p.value.includes(o)),h.value=!1,p.value=null,_.add({severity:"success",summary:"Successful",detail:"Provinsis Deleted",life:3e3})}catch(a){console.error(a),_.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},K=()=>{x.value={global:{value:null,matchMode:X.CONTAINS}}};return(a,o)=>{const f=c("Toast"),n=c("Button"),R=c("FileUpload"),O=c("Toolbar"),D=c("InputText"),w=c("Column"),Y=c("DataTable"),V=c("Dialog");return k(),g("div",oe,[t("div",se,[t("div",le,[s(f),s(O,{class:"mb-4"},{start:i(()=>[t("div",ae,[s(n,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:L}),s(n,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:j,disabled:!p.value||!p.value.length},null,8,["disabled"])])]),end:i(()=>[s(R,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),s(n,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:o[0]||(o[0]=l=>E(l))})]),_:1}),s(Y,{ref_key:"dt",ref:T,value:r.value,selection:p.value,"onUpdate:selection":o[2]||(o[2]=l=>p.value=l),dataKey:"id",paginator:!0,rows:10,filters:x.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} provinsis",responsiveLayout:"scroll"},{header:i(()=>[t("div",te,[ie,t("span",ne,[re,s(D,{modelValue:x.value.global.value,"onUpdate:modelValue":o[1]||(o[1]=l=>x.value.global.value=l),placeholder:"Search..."},null,8,["modelValue"])])])]),default:i(()=>[s(w,{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(w,{field:"kode_prov",header:"kode provinsi",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:i(l=>[de,C(" "+N(l.data.kode_prov),1)]),_:1}),s(w,{field:"nama_provinsi",header:"nama provinsi",sortable:!0,headerStyle:"width:70%; min-width:10rem;"},{body:i(l=>[ue,C(" "+N(l.data.nama_provinsi),1)]),_:1}),s(w,{headerStyle:"min-width:10rem;"},{body:i(l=>[s(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:G=>F(l.data)},null,8,["onClick"]),s(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:G=>$(l.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),s(V,{visible:u.value,"onUpdate:visible":o[5]||(o[5]=l=>u.value=l),style:{width:"450px"},header:"Provinsi Details",modal:!0,class:"p-fluid"},{footer:i(()=>[s(n,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:M}),s(n,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:B})]),default:i(()=>[t("div",ce,[ve,s(D,{id:"kode_prov",modelValue:e.value.kode_prov,"onUpdate:modelValue":o[3]||(o[3]=l=>e.value.kode_prov=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:I({"p-invalid":m.value&&!e.value.kode_prov})},null,8,["modelValue","class"]),m.value&&!e.value.kode_prov?(k(),g("small",pe,"Kode Provinsi is required.")):S("",!0)]),t("div",me,[_e,s(D,{id:"nama_provinsi",modelValue:e.value.nama_provinsi,"onUpdate:modelValue":o[4]||(o[4]=l=>e.value.nama_provinsi=l),modelModifiers:{trim:!0},required:"true",autofocus:"",class:I({"p-invalid":m.value&&!e.value.nama_provinsi})},null,8,["modelValue","class"]),m.value&&!e.value.nama_provinsi?(k(),g("small",fe,"Nama Provinsi is required.")):S("",!0)])]),_:1},8,["visible"]),s(V,{visible:b.value,"onUpdate:visible":o[7]||(o[7]=l=>b.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[s(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[6]||(o[6]=l=>b.value=!1)}),s(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:q})]),default:i(()=>[t("div",be,[he,e.value?(k(),g("span",ye,[C("Are you sure you want to delete "),t("b",null,N(e.value.name),1),C("?")])):S("",!0)])]),_:1},8,["visible"]),s(V,{visible:h.value,"onUpdate:visible":o[9]||(o[9]=l=>h.value=l),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[s(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:o[8]||(o[8]=l=>h.value=!1)}),s(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:z})]),default:i(()=>[t("div",ke,[ge,e.value?(k(),g("span",Pe,"Are you sure you want to delete the selected provinsis?")):S("",!0)])]),_:1},8,["visible"])])])])}}},Ce=H(xe,[["__scopeId","data-v-91e96428"]]);export{Ce as default};
