import{_ as H,s as J,r,k as Q,o as W,E as S,l as X,b as p,c as f,d as b,e as o,f as l,g as n,q as _,t as h,n as N,i as g,p as Z,j as ee}from"./index-3318d3fe.js";const i=V=>(Z("data-v-cd5edc37"),V=V(),ee(),V),ae={class:"grid"},te={class:"col-12"},le={class:"card"},oe={class:"my-2"},se={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ne=i(()=>o("h5",{class:"m-0"},"Kecamatan",-1)),ie={class:"block mt-2 md:mt-0 p-input-icon-left"},de=i(()=>o("i",{class:"pi pi-search"},null,-1)),ce=i(()=>o("span",{class:"p-column-title"},"Kode Kecamatan",-1)),ue=i(()=>o("span",{class:"p-column-title"},"Kode Kabupaten",-1)),re=i(()=>o("span",{class:"p-column-title"},"Kode Provinsi",-1)),me=i(()=>o("span",{class:"p-column-title"},"Nama Kecamatan",-1)),ve=i(()=>o("span",{class:"p-column-title"},"Nama Kabupaten",-1)),pe=i(()=>o("span",{class:"p-column-title"},"Nama Provinsi",-1)),_e={class:"field"},ke=i(()=>o("label",{for:"kode_kec"},"Kode Kecamatan",-1)),fe={key:0,class:"p-invalid"},be={class:"field"},he=i(()=>o("label",{for:"kode_kab"},"Kode Kabupaten",-1)),ye={key:0,class:"p-invalid"},Ke={class:"field"},ge=i(()=>o("label",{for:"kode_prov"},"Kode Provinsi",-1)),we={key:0,class:"p-invalid"},xe={class:"field"},Ce=i(()=>o("label",{for:"nama_kecamatan"},"Nama Kecamatan",-1)),Se={key:0,class:"p-invalid"},Ve={class:"flex align-items-center justify-content-center"},De=i(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ne={key:0},Pe={class:"flex align-items-center justify-content-center"},Te=i(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ie={key:0},Ue={__name:"Kecamatan",setup(V){const y=J(),u=r(null),m=r(!1),w=r(!1),x=r(!1),e=r({}),k=r(null),T=r(null),D=r({}),d=r(!1);Q(()=>{z()}),W(()=>{I()});const I=()=>{S.get("api/kecamatan").then(s=>{s.data.status==="success"&&(u.value=s.data.data)}).catch(s=>{console.error(s)})},U=()=>{e.value={},d.value=!1,m.value=!0},M=()=>{m.value=!1,d.value=!1},q=async()=>{if(d.value=!0,e.value.kode_kec&&e.value.kode_kab&&e.value.kode_prov&&e.value.nama_kecamatan){if(console.log(e.value.id),e.value.id){const s=$(e.value.id);u.value[s]=e.value,await S.put(`/api/kecamatan/${e.value.id}`,{kode_kec:e.value.kode_kec,kode_kab:e.value.kode_kab,kode_prov:e.value.kode_prov,nama_kecamatan:e.value.nama_kecamatan}),y.add({severity:"success",summary:"Successful",detail:"Kecamatan Updated",life:3e3}),m.value=!1,e.value={}}else u.value.push(e.value),await S.post("/api/kecamatan",{kode_kec:e.value.kode_kec,kode_kab:e.value.kode_kab,kode_prov:e.value.kode_prov,nama_kecamatan:e.value.nama_kecamatan}),y.add({severity:"success",summary:"Successful",detail:"Kecamatan Created",life:3e3}),m.value=!1,e.value={};m.value=!1,e.value={}}},L=s=>{e.value={...s},console.log(e),m.value=!0},B=s=>{e.value=s,w.value=!0},F=async()=>{try{await S.delete(`/api/kecamatan/${e.value.id}`),u.value=u.value.filter(s=>s.id!==e.value.id),w.value=!1,e.value={},y.add({severity:"success",summary:"Successful",detail:"Kecamatan Deleted",life:3e3})}catch(s){console.error(s),y.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},$=s=>{let t=-1;for(let K=0;K<u.value.length;K++)if(u.value[K].id===s){t=K;break}return t},A=()=>{T.value.exportCSV()},E=()=>{x.value=!0},j=async()=>{try{const s=k.value.map(t=>t.id);await S.delete("/api/kecamatan",{data:{ids:s}}),u.value=u.value.filter(t=>!k.value.includes(t)),x.value=!1,k.value=null,y.add({severity:"success",summary:"Successful",detail:"Kecamatans Deleted",life:3e3})}catch(s){console.error(s),y.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},z=()=>{D.value={global:{value:null,matchMode:X.CONTAINS}}};return(s,t)=>{const K=p("Toast"),c=p("Button"),R=p("FileUpload"),O=p("Toolbar"),C=p("InputText"),v=p("Column"),Y=p("DataTable"),P=p("Dialog");return f(),b("div",ae,[o("div",te,[o("div",le,[l(K),l(O,{class:"mb-4"},{start:n(()=>[o("div",oe,[l(c,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:U}),l(c,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:E,disabled:!k.value||!k.value.length},null,8,["disabled"])])]),end:n(()=>[l(R,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),l(c,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=a=>A(a))})]),_:1}),l(Y,{ref_key:"dt",ref:T,value:u.value,selection:k.value,"onUpdate:selection":t[2]||(t[2]=a=>k.value=a),dataKey:"id",paginator:!0,rows:10,filters:D.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} kecamatans",responsiveLayout:"scroll"},{header:n(()=>[o("div",se,[ne,o("span",ie,[de,l(C,{modelValue:D.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=a=>D.value.global.value=a),placeholder:"Search..."},null,8,["modelValue"])])])]),default:n(()=>[l(v,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(v,{field:"kode_kec",header:"kode kecamatan",sortable:!0,headerStyle:"width:5%; min-width:10rem;"},{body:n(a=>[ce,_(" "+h(a.data.kode_kab),1)]),_:1}),l(v,{field:"kode_kab",header:"kode kabupaten",sortable:!0,headerStyle:"width:5%; min-width:10rem;"},{body:n(a=>[ue,_(" "+h(a.data.kode_kab),1)]),_:1}),l(v,{field:"kode_prov",header:"kode provinsi",sortable:!0,headerStyle:"width:5%; min-width:10rem;"},{body:n(a=>[re,_(" "+h(a.data.kode_prov),1)]),_:1}),l(v,{field:"nama_kecamatan",header:"nama kecamatan",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:n(a=>[me,_(" "+h(a.data.nama_kecamatan),1)]),_:1}),l(v,{field:"nama_kabupaten",header:"nama kabupaten",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:n(a=>[ve,_(" "+h(a.data.nama_kabupaten),1)]),_:1}),l(v,{field:"nama_provinsi",header:"nama provinsi",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:n(a=>[pe,_(" "+h(a.data.nama_provinsi),1)]),_:1}),l(v,{headerStyle:"min-width:10rem;"},{body:n(a=>[l(c,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:G=>L(a.data)},null,8,["onClick"]),l(c,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:G=>B(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),l(P,{visible:m.value,"onUpdate:visible":t[7]||(t[7]=a=>m.value=a),style:{width:"450px"},header:"Kecamatan Details",modal:!0,class:"p-fluid"},{footer:n(()=>[l(c,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:M}),l(c,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:q})]),default:n(()=>[o("div",_e,[ke,l(C,{id:"kode_kec",modelValue:e.value.kode_kec,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.kode_kec=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:N({"p-invalid":d.value&&!e.value.kode_kec})},null,8,["modelValue","class"]),d.value&&!e.value.kode_kec?(f(),b("small",fe,"Kode Kecamatan is required.")):g("",!0)]),o("div",be,[he,l(C,{id:"kode_kab",modelValue:e.value.kode_kab,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.kode_kab=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:N({"p-invalid":d.value&&!e.value.kode_kab})},null,8,["modelValue","class"]),d.value&&!e.value.kode_kab?(f(),b("small",ye,"Kode Kecamatan is required.")):g("",!0)]),o("div",Ke,[ge,l(C,{id:"kode_prov",modelValue:e.value.kode_prov,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.kode_prov=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:N({"p-invalid":d.value&&!e.value.kode_prov})},null,8,["modelValue","class"]),d.value&&!e.value.kode_prov?(f(),b("small",we,"Kode Kecamatan is required.")):g("",!0)]),o("div",xe,[Ce,l(C,{id:"nama_kecamatan",modelValue:e.value.nama_kecamatan,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.nama_kecamatan=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:N({"p-invalid":d.value&&!e.value.nama_kecamatan})},null,8,["modelValue","class"]),d.value&&!e.value.nama_kecamatan?(f(),b("small",Se,"Nama Kecamatan is required.")):g("",!0)])]),_:1},8,["visible"]),l(P,{visible:w.value,"onUpdate:visible":t[9]||(t[9]=a=>w.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(c,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[8]||(t[8]=a=>w.value=!1)}),l(c,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:F})]),default:n(()=>[o("div",Ve,[De,e.value?(f(),b("span",Ne,[_("Are you sure you want to delete "),o("b",null,h(e.value.name),1),_("?")])):g("",!0)])]),_:1},8,["visible"]),l(P,{visible:x.value,"onUpdate:visible":t[11]||(t[11]=a=>x.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(c,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[10]||(t[10]=a=>x.value=!1)}),l(c,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:j})]),default:n(()=>[o("div",Pe,[Te,e.value?(f(),b("span",Ie,"Are you sure you want to delete the selected kecamatans?")):g("",!0)])]),_:1},8,["visible"])])])])}}},qe=H(Ue,[["__scopeId","data-v-cd5edc37"]]);export{qe as default};
