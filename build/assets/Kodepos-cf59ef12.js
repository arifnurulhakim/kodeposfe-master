import{_ as Z,s as ee,r as u,k as oe,o as ae,E as V,l as le,b as y,c,d as v,e as l,f as s,g as t,q as m,t as b,n as g,i as k,p as se,j as de}from"./index-3318d3fe.js";const i=D=>(se("data-v-ba9369d9"),D=D(),de(),D),te={class:"grid"},ie={class:"col-12"},ne={class:"card"},ue={class:"my-2"},re={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ce=i(()=>l("h5",{class:"m-0"},"Kodepos",-1)),ve={class:"block mt-2 md:mt-0 p-input-icon-left"},_e=i(()=>l("i",{class:"pi pi-search"},null,-1)),pe=i(()=>l("span",{class:"p-column-title"},"Kode Dagri",-1)),me=i(()=>l("span",{class:"p-column-title"},"Kode Pos Lama",-1)),ke=i(()=>l("span",{class:"p-column-title"},"Kode pos modifikasi",-1)),fe=i(()=>l("span",{class:"p-column-title"},"Kode pos baru",-1)),be=i(()=>l("span",{class:"p-column-title"},"Nama Desa",-1)),he=i(()=>l("span",{class:"p-column-title"},"Nama Kecamatan",-1)),ye=i(()=>l("span",{class:"p-column-title"},"Nama Kabupaten",-1)),ge=i(()=>l("span",{class:"p-column-title"},"Nama Provinsi",-1)),we={class:"col-12"},Ke={class:"card"},xe=i(()=>l("h5",null,"DataView",-1)),Ve={class:"data-container"},Ce=["src"],Se={class:"field"},De=i(()=>l("label",{for:"kode_desa"},"Kode Dagri",-1)),qe={key:0,class:"p-invalid"},Ue={class:"field"},Ne=i(()=>l("label",{for:"kode_old"},"Kode Lama",-1)),Pe={key:0,class:"p-invalid"},Me={class:"field"},Ie=i(()=>l("label",{for:"kode_mod"},"Kode Modifikasi",-1)),Te={key:0,class:"p-invalid"},Le={class:"field"},Be=i(()=>l("label",{for:"kode_new"},"Kode Baru",-1)),$e={key:0,class:"p-invalid"},Ee={class:"field"},Fe=i(()=>l("label",{for:"kode_desa"},"Kode Desa",-1)),Ae={key:0,class:"p-invalid"},je={class:"field"},ze=i(()=>l("label",{for:"kode_kec"},"Kode Kecamatan",-1)),Re={key:0,class:"p-invalid"},Oe={class:"field"},Ye=i(()=>l("label",{for:"kode_kab"},"Kode Kabupaten",-1)),Ge={key:0,class:"p-invalid"},He={class:"field"},Je=i(()=>l("label",{for:"kode_prov"},"Kode Provinsi",-1)),Qe={key:0,class:"p-invalid"},We={class:"flex align-items-center justify-content-center"},Xe=i(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ze={key:0},eo={class:"flex align-items-center justify-content-center"},oo=i(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ao={key:0},lo={__name:"Kodepos",setup(D){const K=ee(),_=u(null),h=u(!1),C=u(!1),S=u(!1),e=u({}),w=u(null),M=u(null),q=u({}),n=u(!1),N=u(null),I=u({}),L=u(null),P=u(!1);oe(()=>{H()}),ae(()=>{B()});const B=()=>{V.get("api/kode-pos").then(d=>{d.data.status==="success"&&(_.value=d.data.data)}).catch(d=>{console.error(d)})},$=()=>{e.value={},n.value=!1,h.value=!0},E=()=>{h.value=!1,n.value=!1},F=async()=>{if(n.value=!0,e.value.kode_desa&&e.value.kode_old&&e.value.kode_mod&&e.value.kode_new&&e.value.kode_desa&&e.value.kode_kec&&e.value.kode_kab&&e.value.kode_prov){if(console.log(e.value.id),e.value.id){const d=R(e.value.id);_.value[d]=e.value,await V.put(`/api/kode-pos/${e.value.id}`,{kode_desa:e.value.kode_desa,kode_old:e.value.kode_old,kode_mod:e.value.kode_mod,kode_new:e.value.kode_new,kode_desa:e.value.kode_desa,kode_kec:e.value.kode_kec,kode_prov:e.value.kode_prov}),K.add({severity:"success",summary:"Successful",detail:"Kodepos Updated",life:3e3}),h.value=!1,e.value={}}else _.value.push(e.value),await V.post("/api/kode-pos",{kode_desa:e.value.kode_desa,kode_old:e.value.kode_old,kode_mod:e.value.kode_mod,kode_new:e.value.kode_new,kode_desa:e.value.kode_desa,kode_kec:e.value.kode_kec,kode_prov:e.value.kode_prov}),K.add({severity:"success",summary:"Successful",detail:"Kodepos Created",life:3e3}),h.value=!1,e.value={};h.value=!1,e.value={}}},A=d=>{e.value={...d},console.log(e),h.value=!0},j=d=>{e.value=d,C.value=!0},z=async()=>{try{await V.delete(`/api/kode-pos/${e.value.id}`),_.value=_.value.filter(d=>d.id!==e.value.id),C.value=!1,e.value={},K.add({severity:"success",summary:"Successful",detail:"Kodepos Deleted",life:3e3})}catch(d){console.error(d),K.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},R=d=>{let a=-1;for(let x=0;x<_.value.length;x++)if(_.value[x].id===d){a=x;break}return a},O=()=>{M.value.exportCSV()},Y=()=>{S.value=!0},G=async()=>{try{const d=w.value.map(a=>a.id);await V.delete("/api/kodepos",{data:{ids:d}}),_.value=_.value.filter(a=>!w.value.includes(a)),S.value=!1,w.value=null,K.add({severity:"success",summary:"Successful",detail:"Kodeposs Deleted",life:3e3})}catch(d){console.error(d),K.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},H=()=>{q.value={global:{value:null,matchMode:le.CONTAINS}}},J=d=>{e.value={...d},V.get(`/api/kode-pos/qrcode/${e.value.id}`).then(a=>{N.value=a.data,console.log(N),I.value=a.data.data.qrCode,console.log(I),P.value=!0,d.imageUrl=L}).catch(a=>{console.error("Error:",a)})};return(d,a)=>{const x=y("Toast"),r=y("Button"),Q=y("FileUpload"),W=y("Toolbar"),f=y("InputText"),p=y("Column"),X=y("DataTable"),U=y("Dialog");return c(),v("div",te,[l("div",ie,[l("div",ne,[s(x),s(W,{class:"mb-4"},{start:t(()=>[l("div",ue,[s(r,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:$}),s(r,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:Y,disabled:!w.value||!w.value.length},null,8,["disabled"])])]),end:t(()=>[s(Q,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),s(r,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:a[0]||(a[0]=o=>O(o))})]),_:1}),s(X,{ref_key:"dt",ref:M,value:_.value,selection:w.value,"onUpdate:selection":a[2]||(a[2]=o=>w.value=o),dataKey:"id",paginator:!0,rows:10,filters:q.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} kodeposs",responsiveLayout:"scroll"},{header:t(()=>[l("div",re,[ce,l("span",ve,[_e,s(f,{modelValue:q.value.global.value,"onUpdate:modelValue":a[1]||(a[1]=o=>q.value.global.value=o),placeholder:"Search..."},null,8,["modelValue"])])])]),default:t(()=>[s(p,{headerStyle:"min-width:5rem;"},{body:t(o=>[s(r,{icon:"pi pi-qrcode",class:"p-button-rounded p-button-info mt-3",onClick:T=>J(o.data)},null,8,["onClick"])]),_:1}),s(p,{field:"kode_dagri",header:"kode dagri",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[pe,m(" "+b(o.data.kode_dagri),1)]),_:1}),s(p,{field:"kode_old",header:"kode pos lama",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[me,m(" "+b(o.data.kode_old),1)]),_:1}),s(p,{field:"kode_mod",header:"kode pos modifikasi",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[ke,m(" "+b(o.data.kode_mod),1)]),_:1}),s(p,{field:"kode_new",header:"kode pos baru",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[fe,m(" "+b(o.data.kode_new),1)]),_:1}),s(p,{field:"nama_desa",header:"nama desa",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[be,m(" "+b(o.data.nama_desa),1)]),_:1}),s(p,{field:"nama_kecamatan",header:"nama kecamatan",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:t(o=>[he,m(" "+b(o.data.nama_kecamatan),1)]),_:1}),s(p,{field:"nama_kabupaten",header:"nama kabupaten",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:t(o=>[ye,m(" "+b(o.data.nama_kabupaten),1)]),_:1}),s(p,{field:"nama_provinsi",header:"nama provinsi",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:t(o=>[ge,m(" "+b(o.data.nama_provinsi),1)]),_:1}),s(p,{headerStyle:"min-width:10rem;"},{body:t(o=>[s(r,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:T=>A(o.data)},null,8,["onClick"]),s(r,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:T=>j(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),s(U,{visible:P.value,"onUpdate:visible":a[3]||(a[3]=o=>P.value=o),style:{width:"450px"},header:"Kodepos Details",modal:!0,class:"p-fluid"},{default:t(()=>[l("div",we,[l("div",Ke,[xe,l("div",Ve,[l("img",{src:"data:image/;base64,"+N.value.data.qrCode.base64},null,8,Ce)])])])]),_:1},8,["visible"]),s(U,{visible:h.value,"onUpdate:visible":a[12]||(a[12]=o=>h.value=o),style:{width:"450px"},header:"Kodepos Details",modal:!0,class:"p-fluid"},{footer:t(()=>[s(r,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:E}),s(r,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:F})]),default:t(()=>[l("div",Se,[De,s(f,{id:"kode_desa",modelValue:e.value.kode_desa,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.kode_desa=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_desa?(c(),v("small",qe,"Kode desa is required.")):k("",!0)]),l("div",Ue,[Ne,s(f,{id:"kode_old",modelValue:e.value.kode_old,"onUpdate:modelValue":a[5]||(a[5]=o=>e.value.kode_old=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_old?(c(),v("small",Pe,"Kode desa is required.")):k("",!0)]),l("div",Me,[Ie,s(f,{id:"kode_mod",modelValue:e.value.kode_mod,"onUpdate:modelValue":a[6]||(a[6]=o=>e.value.kode_mod=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_mod?(c(),v("small",Te,"Kode desa is required.")):k("",!0)]),l("div",Le,[Be,s(f,{id:"kode_new",modelValue:e.value.kode_new,"onUpdate:modelValue":a[7]||(a[7]=o=>e.value.kode_new=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_new?(c(),v("small",$e,"Kode desa is required.")):k("",!0)]),l("div",Ee,[Fe,s(f,{id:"kode_desa    ",modelValue:e.value.kode_desa,"onUpdate:modelValue":a[8]||(a[8]=o=>e.value.kode_desa=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":n.value&&!e.value.kode_desa})},null,8,["modelValue","class"]),n.value&&!e.value.kode_desa?(c(),v("small",Ae,"Kode desa is required.")):k("",!0)]),l("div",je,[ze,s(f,{id:"kode_kec",modelValue:e.value.kode_kec,"onUpdate:modelValue":a[9]||(a[9]=o=>e.value.kode_kec=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":n.value&&!e.value.kode_kec})},null,8,["modelValue","class"]),n.value&&!e.value.kode_kec?(c(),v("small",Re,"Kode kecamatan is required.")):k("",!0)]),l("div",Oe,[Ye,s(f,{id:"kode_kab",modelValue:e.value.kode_kab,"onUpdate:modelValue":a[10]||(a[10]=o=>e.value.kode_kab=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":n.value&&!e.value.kode_kab})},null,8,["modelValue","class"]),n.value&&!e.value.kode_kab?(c(),v("small",Ge,"Kode kabupaten is required.")):k("",!0)]),l("div",He,[Je,s(f,{id:"kode_prov",modelValue:e.value.kode_prov,"onUpdate:modelValue":a[11]||(a[11]=o=>e.value.kode_prov=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:g({"p-invalid":n.value&&!e.value.kode_prov})},null,8,["modelValue","class"]),n.value&&!e.value.kode_prov?(c(),v("small",Qe,"Kode Provinsi is required.")):k("",!0)])]),_:1},8,["visible"]),s(U,{visible:C.value,"onUpdate:visible":a[14]||(a[14]=o=>C.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:t(()=>[s(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[13]||(a[13]=o=>C.value=!1)}),s(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:z})]),default:t(()=>[l("div",We,[Xe,e.value?(c(),v("span",Ze,[m("Are you sure you want to delete "),l("b",null,b(e.value.name),1),m("?")])):k("",!0)])]),_:1},8,["visible"]),s(U,{visible:S.value,"onUpdate:visible":a[16]||(a[16]=o=>S.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:t(()=>[s(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[15]||(a[15]=o=>S.value=!1)}),s(r,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:G})]),default:t(()=>[l("div",eo,[oo,e.value?(c(),v("span",ao,"Are you sure you want to delete the selected kodeposs?")):k("",!0)])]),_:1},8,["visible"])])])])}}},to=Z(lo,[["__scopeId","data-v-ba9369d9"]]);export{to as default};
