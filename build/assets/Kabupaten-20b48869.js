import{_ as H,s as J,r as c,k as Q,o as W,E as K,l as X,b as v,c as f,d as h,e as o,f as l,g as n,q as y,t as w,n as P,i as C,p as Z,j as ee}from"./index-3318d3fe.js";const u=S=>(Z("data-v-f6715235"),S=S(),ee(),S),ae={class:"grid"},te={class:"col-12"},le={class:"card"},oe={class:"my-2"},se={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ne=u(()=>o("h5",{class:"m-0"},"Kabupaten",-1)),ie={class:"block mt-2 md:mt-0 p-input-icon-left"},ue=u(()=>o("i",{class:"pi pi-search"},null,-1)),de=u(()=>o("span",{class:"p-column-title"},"Kode Kabupaten",-1)),re=u(()=>o("span",{class:"p-column-title"},"Kode Provinsi",-1)),ce=u(()=>o("span",{class:"p-column-title"},"Nama Kabupaten",-1)),pe=u(()=>o("span",{class:"p-column-title"},"Nama Provinsi",-1)),ve={class:"field"},me=u(()=>o("label",{for:"kode_kab"},"Kode Kabupaten",-1)),be={key:0,class:"p-invalid"},_e={class:"field"},ke=u(()=>o("label",{for:"kode_prov"},"Kode Provinsi",-1)),fe={key:0,class:"p-invalid"},he={class:"field"},ye=u(()=>o("label",{for:"nama_kabupaten"},"Nama Kabupaten",-1)),ge={key:0,class:"p-invalid"},xe={class:"flex align-items-center justify-content-center"},Ke=u(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),we={key:0},Ce={class:"flex align-items-center justify-content-center"},Se=u(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ve={key:0},De={__name:"Kabupaten",setup(S){const b=J(),d=c(null),p=c(!1),g=c(!1),x=c(!1),e=c({}),m=c(null),T=c(null),V=c({}),r=c(!1);Q(()=>{z()}),W(()=>{I()});const I=()=>{K.get("api/kabupaten").then(s=>{s.data.status==="success"&&(d.value=s.data.data)}).catch(s=>{console.error(s)})},U=()=>{e.value={},r.value=!1,p.value=!0},M=()=>{p.value=!1,r.value=!1},L=async()=>{if(r.value=!0,e.value.kode_kab&&e.value.kode_prov&&e.value.nama_kabupaten){if(console.log(e.value.id),e.value.id){const s=$(e.value.id);d.value[s]=e.value,await K.put(`/api/kabupaten/${e.value.id}`,{kode_kab:e.value.kode_kab,kode_prov:e.value.kode_prov,nama_kabupaten:e.value.nama_kabupaten}),b.add({severity:"success",summary:"Successful",detail:"Kabupaten Updated",life:3e3}),p.value=!1,e.value={}}else d.value.push(e.value),await K.post("/api/kabupaten",{kode_kab:e.value.kode_kab,kode_prov:e.value.kode_prov,nama_kabupaten:e.value.nama_kabupaten}),b.add({severity:"success",summary:"Successful",detail:"Kabupaten Created",life:3e3}),p.value=!1,e.value={};p.value=!1,e.value={}}},q=s=>{e.value={...s},console.log(e),p.value=!0},B=s=>{e.value=s,g.value=!0},F=async()=>{try{await K.delete(`/api/kabupaten/${e.value.id}`),d.value=d.value.filter(s=>s.id!==e.value.id),g.value=!1,e.value={},b.add({severity:"success",summary:"Successful",detail:"Kabupaten Deleted",life:3e3})}catch(s){console.error(s),b.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},$=s=>{let t=-1;for(let _=0;_<d.value.length;_++)if(d.value[_].id===s){t=_;break}return t},A=()=>{T.value.exportCSV()},E=()=>{x.value=!0},j=async()=>{try{const s=m.value.map(t=>t.id);await K.delete("/api/kabupaten",{data:{ids:s}}),d.value=d.value.filter(t=>!m.value.includes(t)),x.value=!1,m.value=null,b.add({severity:"success",summary:"Successful",detail:"Kabupatens Deleted",life:3e3})}catch(s){console.error(s),b.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},z=()=>{V.value={global:{value:null,matchMode:X.CONTAINS}}};return(s,t)=>{const _=v("Toast"),i=v("Button"),R=v("FileUpload"),O=v("Toolbar"),D=v("InputText"),k=v("Column"),Y=v("DataTable"),N=v("Dialog");return f(),h("div",ae,[o("div",te,[o("div",le,[l(_),l(O,{class:"mb-4"},{start:n(()=>[o("div",oe,[l(i,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:U}),l(i,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:E,disabled:!m.value||!m.value.length},null,8,["disabled"])])]),end:n(()=>[l(R,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),l(i,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=a=>A(a))})]),_:1}),l(Y,{ref_key:"dt",ref:T,value:d.value,selection:m.value,"onUpdate:selection":t[2]||(t[2]=a=>m.value=a),dataKey:"id",paginator:!0,rows:10,filters:V.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} kabupatens",responsiveLayout:"scroll"},{header:n(()=>[o("div",se,[ne,o("span",ie,[ue,l(D,{modelValue:V.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=a=>V.value.global.value=a),placeholder:"Search..."},null,8,["modelValue"])])])]),default:n(()=>[l(k,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(k,{field:"kode_kab",header:"kode kabupaten",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:n(a=>[de,y(" "+w(a.data.kode_kab),1)]),_:1}),l(k,{field:"kode_prov",header:"kode provinsi",sortable:!0,headerStyle:"width:10%; min-width:10rem;"},{body:n(a=>[re,y(" "+w(a.data.kode_prov),1)]),_:1}),l(k,{field:"nama_kabupaten",header:"nama kabupaten",sortable:!0,headerStyle:"width:30%; min-width:10rem;"},{body:n(a=>[ce,y(" "+w(a.data.nama_kabupaten),1)]),_:1}),l(k,{field:"nama_provinsi",header:"nama provinsi",sortable:!0,headerStyle:"width:30%; min-width:10rem;"},{body:n(a=>[pe,y(" "+w(a.data.nama_provinsi),1)]),_:1}),l(k,{headerStyle:"min-width:10rem;"},{body:n(a=>[l(i,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:G=>q(a.data)},null,8,["onClick"]),l(i,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:G=>B(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),l(N,{visible:p.value,"onUpdate:visible":t[6]||(t[6]=a=>p.value=a),style:{width:"450px"},header:"Kabupaten Details",modal:!0,class:"p-fluid"},{footer:n(()=>[l(i,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:M}),l(i,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:L})]),default:n(()=>[o("div",ve,[me,l(D,{id:"kode_kab",modelValue:e.value.kode_kab,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.kode_kab=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:P({"p-invalid":r.value&&!e.value.kode_kab})},null,8,["modelValue","class"]),r.value&&!e.value.kode_kab?(f(),h("small",be,"Kode Kabupaten is required.")):C("",!0)]),o("div",_e,[ke,l(D,{id:"kode_prov",modelValue:e.value.kode_prov,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.kode_prov=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:P({"p-invalid":r.value&&!e.value.kode_prov})},null,8,["modelValue","class"]),r.value&&!e.value.kode_prov?(f(),h("small",fe,"Kode Kabupaten is required.")):C("",!0)]),o("div",he,[ye,l(D,{id:"nama_kabupaten",modelValue:e.value.nama_kabupaten,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.nama_kabupaten=a),modelModifiers:{trim:!0},required:"true",autofocus:"",class:P({"p-invalid":r.value&&!e.value.nama_kabupaten})},null,8,["modelValue","class"]),r.value&&!e.value.nama_kabupaten?(f(),h("small",ge,"Nama Kabupaten is required.")):C("",!0)])]),_:1},8,["visible"]),l(N,{visible:g.value,"onUpdate:visible":t[8]||(t[8]=a=>g.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(i,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=a=>g.value=!1)}),l(i,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:F})]),default:n(()=>[o("div",xe,[Ke,e.value?(f(),h("span",we,[y("Are you sure you want to delete "),o("b",null,w(e.value.name),1),y("?")])):C("",!0)])]),_:1},8,["visible"]),l(N,{visible:x.value,"onUpdate:visible":t[10]||(t[10]=a=>x.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(i,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=a=>x.value=!1)}),l(i,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:j})]),default:n(()=>[o("div",Ce,[Se,e.value?(f(),h("span",Ve,"Are you sure you want to delete the selected kabupatens?")):C("",!0)])]),_:1},8,["visible"])])])])}}},Pe=H(De,[["__scopeId","data-v-f6715235"]]);export{Pe as default};
